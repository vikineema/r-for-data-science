services:
  jupyterlab:
    # Uses the specified image which includes Python, R, and the IRkernel
    # image: quay.io/jupyter/r-notebook:latest
    build:
      context: .
      dockerfile: Dockerfile

    # Assigns the container a clean, memorable name
    container_name: notebook

    # Maps host port 8888 to container port 8888 for web access
    ports:
      - "8888:8888"
      - "17817:17817"
    # Environment variables: JUPYTER_ENABLE_LAB=yes ensures JupyterLab starts
    environment:
      # Optional: set a token here, or rely on the random one generated by the image
      # - JUPYTER_TOKEN=mysecrettoken
      - JUPYTER_ENABLE_LAB=yes
      - JUPYTER_TOKEN=""

    # Loads additional variables from a .env file (if it exists)
    env_file:
      - .env

    # Mounts your local working directory into the container
    volumes:
      - .:/home/jovyan/

    # Keeps the container running in the background but allows you to attach/view logs
    tty: true
    stdin_open: true
